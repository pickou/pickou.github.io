<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>gitlab workflow – Yospace</title> <meta name="description" content="My intrest lies in Deep Learning and machine learning, which are highlighted in the blog. Other things like code style, git tools and languages(c, c++ and python) will also be coverd."> <meta name="keywords" content="gitlab, tools"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://pickou.github.io/assets/img/logo.png"> <meta name="twitter:title" content="gitlab workflow"> <meta name="twitter:description" content="gitlab, code manage tool for cooperation"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="gitlab workflow"> <meta property="og:description" content="gitlab, code manage tool for cooperation"> <meta property="og:url" content="https://pickou.github.io/gitlab-usage/"> <meta property="og:site_name" content="Yospace"> <meta property="og:image" content="https://pickou.github.io/assets/img/logo.png"> <link rel="canonical" href="https://pickou.github.io/gitlab-usage/"> <link href="https://pickou.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Yospace Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://pickou.github.io/assets/css/main.css"> <!-- JS --> <script src="https://pickou.github.io/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://pickou.github.io/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://pickou.github.io/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://pickou.github.io/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://pickou.github.io/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://pickou.github.io/favicon.png"> <link rel="shortcut icon" href="https://pickou.github.io/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(https://pickou.github.io/assets/img/forest_stars.jpg); }</style> <!-- Post Feature Image --> <!-- mathjax --> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ text2jax: { inlineMath: [['$','$'], ["\\(", "\\)"]], processEscapes: true } }); </script> <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>
<body>
<p>script&gt;  </p> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://pickou.github.io/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://pickou.github.io/assets/img/logo.png" alt="Yospace photo" class="author-photo"> <h4>Yospace</h4> <p>My intrest lies in Deep Learning and machine learning, which are highlighted in the blog. Other things like code style, git tools and languages(c, c++ and python) will also be coverd.</p> </li> <li><a href="https://pickou.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:swjtu_junchaoyan@163.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://github.com/pickou" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://stackoverflow.com/users/8281027/jcyan%20from%20a%20" http: link target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-stack-overflow"></i> StackOverflow</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://pickou.github.io/posts/">All Posts</a></li> <li><a href="https://pickou.github.io/tags/">All Tags</a></li> </ul> </li> <li><a href="https://pickou.github.io/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>gitlab workflow</h1> <h4>11 Dec 2017</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~1 minute </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://pickou.github.io/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p>gitlab作为一个协同工作的代码管理工具，使用起来很方便，能大大提高生产效率。</p> <figure> <a><img src="https://pickou.github.io/pics/gitlab.png"></a> </figure> <p>git的工作流主要维护本地仓库的三棵树，分别是<strong>工作目录</strong>，包含了实际的文件；<strong>暂存区(Index)</strong>， 相当于一个缓冲区，保存临时改动；<strong>HEAD</strong>,指向最后一次提交的结果。</p> <figure> <a><img src="https://pickou.github.io/pics/gitworkflow.png"></a> </figure> <h2 id="1-easy-workflow">1. easy workflow</h2> <p>take demo.cpp for example</p> <ul> <li>
<code class="highlighter-rouge">git add demo.cpp</code> demo.cpp被添加到暂存区</li> <li>
<code class="highlighter-rouge">git commit -m "demo cpp"</code> 提交改动到<strong>HEAD</strong>,但还没有提交到远程分支</li> <li>
<code class="highlighter-rouge">git pull origin branch-name</code> 从远程分支上pull到本地，更新本地分支</li> <li>
<code class="highlighter-rouge">git push origin branch-name</code> 提交改动到远程分支branch-name上</li> </ul> <h2 id="2-branch">2. branch</h2> <p>一般在创建一个repository之后，会有一个默认的分支master。现在，在本地建立一个新的分支<code class="highlighter-rouge">feature_x</code>, 使用命令<code class="highlighter-rouge">git checkout -b feature_x</code>，就在本地新建了一个分支，并同时切换到该分支上，这个分支相当于 另外一个工作区。使用命令<code class="highlighter-rouge">git checkout master</code>就切换回master了。<code class="highlighter-rouge">git push origin feature_x</code>本地新建 的分支就被推送到远程，远程多了一个分支<code class="highlighter-rouge">feature_x</code>。要删除分支，使用命令<code class="highlighter-rouge">git branch -d feature_x</code></p> <figure> <a><img src="https://pickou.github.io/pics/branch.png"></a> </figure> <h2 id="3-merge">3. merge</h2> <p>在工业生产中，每个人会在一个对应的分支上开发自己的feature,完成开发之后提交<strong>MR</strong>,然后通过review,和CI, 最终merge到master上。这样保证了项目的质量，同时提高工作效率。<code class="highlighter-rouge">git merge feature_x</code>，提交了 <code class="highlighter-rouge">feature_x</code>和master的MR。</p> <p>当你在merge或者是pull的时候可能会出现conflicts，那么你需要先修改好这些冲突， 然后使用<code class="highlighter-rouge">git add</code>添加修改好的文件，再进行后续的步骤。</p> <figure> <a><img src="https://pickou.github.io/pics/merge.png"></a> </figure> <h2 id="4-git-rebase">4. git rebase</h2> <p><code class="highlighter-rouge">git rebase</code>主要作用是将一个分支的修改合并到当前的分支，下面以一个例子来讲解</p> <ul> <li>现在有一个远程分支origin,已经有了两个commits，然后基于origin分支新建一个mywork分支</li> </ul> <figure> <a><img src="https://pickou.github.io/pics/w1.png"></a> </figure> <ul> <li>你在mywork分支上有了两个commits,你的同事在origin上也提交了两个commits，两个分支各自都前进了, 那么就产生了分叉</li> </ul> <figure> <a><img src="https://pickou.github.io/pics/w2.png"></a> </figure> <ul> <li>你在提交MR之前会先会使用<code class="highlighter-rouge">git pull</code>更新本地分支，那么两个分支就会产生merge，看起来就是这样的</li> </ul> <figure> <a><img src="https://pickou.github.io/pics/w3.png"></a> </figure> <ul> <li>如果你想要mywork分支像没有经过合并一样，需要使用<code class="highlighter-rouge">git rebase</code>,这样会把mywork分支中的commits临时 保存在<code class="highlighter-rouge">.git/rebase</code>中，然后更新mywork为最新的origin分支，接着再把这些临时保存的修改应用到mywork上, 这样，看起来就跟没有合并一样，结构更为清爽，便于repository的管理。</li> </ul> <figure> <a><img src="https://pickou.github.io/pics/w4.png"></a> </figure> <ul> <li>当mywork分支更新之后，之前的commits就会被丢掉，垃圾回收机制就会把这些没有用的commits给删除掉</li> </ul> <figure> <a><img src="https://pickou.github.io/pics/w5.png"></a> </figure> <p>如果<code class="highlighter-rouge">git rebase</code>的过程中出现了conflicts，那么可以先解决玩冲突，然后使用git add添加修改，接着使用 <code class="highlighter-rouge">git rebase --continue</code></p> <h2 id="5-conflicts">5. conflicts</h2> <p>多人协作的时候,很容易产生conflicts,这时候需要我们先在本地解决好冲突，然后再进行后面的步骤。冲突表现为 下图这样，在<code class="highlighter-rouge">&lt;&lt;&lt;&lt;&lt;&lt;</code>和<code class="highlighter-rouge">HEAD</code>之间是你当前的修改,后面那部分是别人的修改或者是你之前的修改。如果两个工作都需要， 那么把所有的非代码部分去掉就可以了，如果只需要其中一个，那就保留其中一个。</p> <figure> <a><img src="https://pickou.github.io/pics/conflicts.png"></a> </figure> <h2 id="6-other-commands">6. other commands</h2> <ol> <li>
<code class="highlighter-rouge">git stash</code> 用作你有一些修改，但是又不想提交这些修改，同时你又要回到一个干净的工作环境。这个命令 就会把你在工作环境中和Index下的修改放到一个缓冲区去，然后把工作环境revert到最近的一个commits(HEAD)。</li> <li>
<code class="highlighter-rouge">git stash pop</code> 弹出之前保存的修改</li> <li>
<code class="highlighter-rouge">git log</code> 查看git的日志，所有提交的commits。可以按照树形显示分支，<code class="highlighter-rouge">git log --graph --oneline --decorate --all</code>
</li> </ol> <figure> <a><img src="https://pickou.github.io/pics/git_log.png"></a> </figure> <h4 id="reference">Reference</h4> <ul> <li>http://rogerdudler.github.io/git-guide/index.zh.html</li> <li>https://team-coder.com/avoid-merge-conflicts/</li> <li>http://blog.csdn.net/hudashi/article/details/7664631/</li> <li>https://git-scm.com/docs/git-rebase</li> <li>https://team-coder.com/from-git-flow-to-trunk-based-development/</li> </ul> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://pickou.github.io/tags/#gitlab" title="Pages tagged gitlab" class="tag"><span class="term">gitlab</span></a><a href="https://pickou.github.io/tags/#tools" title="Pages tagged tools" class="tag"><span class="term">tools</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://pickou.github.io/gitlab-usage/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://pickou.github.io/gitlab-usage/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://pickou.github.io/gitlab-usage/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="https://pickou.github.io/assets/js/jquery-1.12.0.min.js"></script> <script src="https://pickou.github.io/assets/js/jquery.dlmenu.min.js"></script> <script src="https://pickou.github.io/assets/js/jquery.goup.min.js"></script> <script src="https://pickou.github.io/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://pickou.github.io/assets/js/jquery.fitvid.min.js"></script> <script src="https://pickou.github.io/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'taylantatli'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript> <!-- MathJax --> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ text2jax: { inlineMath: [['$','$'], ["\\(","\\)"]], processEscapes: true } }); </script> <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>  </body>
</html>
